{% extends "base.html" %}

{% block content %}
<h1 style="text-align: center; font-size: 2rem; font-weight: bold; margin-bottom: 1rem;">ì˜ë£Œì§„ ì†Œê°œ</h1>

<!-- âœ… ì˜ì‚¬ ì„ íƒ ë²„íŠ¼ -->
<div class="doctor-tabs">
  {% for doctor in doctors %}
    <button class="doctor-tab" onclick="loadDoctor(`{{ doctor['Docsë§í¬'] | safe }}`, this)" data-doc="{{ doctor['Docsë§í¬'] | safe }}">
      {{ doctor['ì´ë¦„'] }} {{ doctor['ì§ì±…'] }}
    </button>
  {% endfor %}
</div>

<!-- âœ… Google Docs í”„ë ˆì„ -->
<div class="doctor-frame-container">
  <iframe id="doctorFrame" width="100%" style="border: none; display: block; margin: auto; max-width: 900px; height: auto; min-height: 1800px;"></iframe>

</div>

<!-- âœ… ìŠ¤íƒ€ì¼ (ë²„íŠ¼ ë””ìì¸ ê°œì„  ë° ê°€ë…ì„± í–¥ìƒ) -->
<style>
  .doctor-tabs {
    display: flex;
    flex-wrap: wrap; /* ë²„íŠ¼ì´ ë§ì•„ì§€ë©´ ìë™ ì¤„ë°”ê¿ˆ */
    gap: 20px;
    justify-content: center;
    margin-bottom: 20px;
  }

  .doctor-tab {
    font-size: 1.2rem;
    font-weight: bold;
    padding: 0.7rem 1.2rem;
    text-decoration: none;
    color: #008080;
    border: 2px solid transparent;
    background: none;
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .doctor-tab:hover, .doctor-tab.active {
    border-bottom: 3px solid #008080;
    color: #005f5f;
  }

  .doctor-frame-container {
    text-align: center;
    max-width: 900px;
    margin: 0 auto;
  }

  iframe {
    width: 100%;
    height: 700px;
    border-radius: 8px;
  }
</style>

<!-- âœ… JavaScript (ì²« ë²ˆì§¸ ì˜ì‚¬ ê¸°ë³¸ í‘œì‹œ & ë””ë²„ê¹… ì¶”ê°€) -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    let firstDoctor = document.querySelector(".doctor-tab");
    if (firstDoctor) {
      firstDoctor.classList.add("active");
      loadDoctor(firstDoctor.getAttribute("data-doc"), firstDoctor);
    } else {
      console.error("âŒ ì²« ë²ˆì§¸ ì˜ì‚¬ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ.");
    }
  });

  function loadDoctor(docLink, button) {
    if (docLink) {
        let embedUrl = docLink.includes("/pub") ? docLink + "?embedded=true" : docLink;
        console.log("ğŸ“Œ ë¡œë“œí•  ë¬¸ì„œ URL:", embedUrl);
        document.getElementById("doctorFrame").src = embedUrl;

        document.querySelectorAll(".doctor-tab").forEach(btn => btn.classList.remove("active"));
        button.classList.add("active");
    } else {
        console.error("âŒ ì˜¬ë°”ë¥¸ Docs ë§í¬ê°€ ì—†ìŠµë‹ˆë‹¤.");
    }
  }
</script>

{% endblock %}
